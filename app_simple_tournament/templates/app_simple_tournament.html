{% extends 'base.html' %}
{% load static %}

<!-- Title Block -->
{% block 'title' %}
Simple Tournament
{% endblock %}

<!-- Head Block: CSS and Meta Tags -->
{% block 'head' %}
<link rel="stylesheet" href="{% static 'app_simple_tournament/css/simple_tournament.css' %}">
{% endblock %}

<!-- Dashboard Block: Main Content -->
<!-- Dashboard Block: Main Content -->
{% block 'dashboard' %}
<div class="dashboard">
    <!-- First Container: Create Tournament -->
    <div class="container" id="createTournamentBtn" onclick="document.getElementById('tournamentModal').style.display='block'">
        <!-- Tournament Bracket Section -->
        <div class="bracket-section">
            {% include 'app_simple_tournament/svg/tournament_bracket.html' %}
        </div>

        <!-- Text Section with "Create" Button -->
        <div class="text-section">
            <div class="create-btn">Criar Torneio Simples</div>
        </div>
    </div>

<!-- Dynamically Generated Tournament Containers -->
{% for tournament in tournaments %}
    <div class="container" onclick="location.href='#'" onmouseover="showDeleteOption(this)" onmouseout="hideDeleteOption(this)">
        <!-- Delete Option (Trash Can Icon) -->
        <div class="delete-option">
            <form action="{% url 'delete_tournament' tournament.id %}" method="POST" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="delete-button">
                    <i class='bx bx-trash' style="font-size: 20px; color: red;"></i>
                </button>
            </form>
        </div>

        <!-- Text Section with Tournament Name -->
        <div class="text-section">
            {{ tournament.name }}
        </div>
    </div>
{% endfor %}
</div>

<!-- The Modal -->
<div id="tournamentModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Criar Torneio</h2>
        {% if error %}
            <p style="color: red;">{{ error }}</p>
        {% endif %}
        <form id="tournamentForm" method="POST" action="{% url 'create_tournament' %}">
            {% csrf_token %}
            <label for="tournament_name">Nome do Torneio:</label>
            <input type="text" id="tournament_name" name="tournament_name" required>
            <button type="submit">Criar</button>
        </form>
    </div>
</div>
{% endblock %}
<!-- Body Block: JavaScript -->
{% block 'body' %}
<script src="{% static 'app_simple_tournament/js/simple_tournament.js' %}"></script>
{% endblock %}